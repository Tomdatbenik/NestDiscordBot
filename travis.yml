language: node_js
node_js:
  - 16
env:
  - BOT_TOKEN=${BOT_TOKEN}

install:
  - npm install

script:
  - npm build
  - docker build -t docker.io/$DOCKER_NAME/nestdiscordbot:latest .

after_success:
 - docker login -u $DOCKER_NAME -p $DOCKER_PASSWORD
 - docker push docker.io/$DOCKER_NAME/nestdiscordbot:latest